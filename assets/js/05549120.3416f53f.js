"use strict";(self.webpackChunkmaybee_docs=self.webpackChunkmaybee_docs||[]).push([[553],{8453:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>d});var i=s(6540);const r={},l=i.createContext(r);function t(e){const n=i.useContext(l);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),i.createElement(l.Provider,{value:n},e.children)}},9329:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>t,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"technical/api","title":"Smart Contract API","description":"This document provides a technical reference for MayBee\'s smart contract functions, events, and their usage. The contract implements role-based access control and integrates with UMA Oracle for trustless settlement.","source":"@site/docs/technical/api.md","sourceDirName":"technical","slug":"/technical/api","permalink":"/maybee/docs/technical/api","draft":false,"unlisted":false,"editUrl":"https://github.com/tanguyvans/maybee/docs/technical/api.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Roles & Access Control","permalink":"/maybee/docs/core/roles"}}');var r=s(4848),l=s(8453);const t={},d="Smart Contract API",c={},a=[{value:"Core Functions",id:"core-functions",level:2},{value:"Game Management",id:"game-management",level:3},{value:"Betting",id:"betting",level:3},{value:"Settlement",id:"settlement",level:3},{value:"Claims",id:"claims",level:3},{value:"Events",id:"events",level:2},{value:"Error Codes",id:"error-codes",level:2}];function o(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"smart-contract-api",children:"Smart Contract API"})}),"\n",(0,r.jsx)(n.p,{children:"This document provides a technical reference for MayBee's smart contract functions, events, and their usage. The contract implements role-based access control and integrates with UMA Oracle for trustless settlement."}),"\n",(0,r.jsx)(n.h2,{id:"core-functions",children:"Core Functions"}),"\n",(0,r.jsx)(n.h3,{id:"game-management",children:"Game Management"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-solidity",children:"function createGame(\n    string memory title,\n    string memory description,\n    uint256 expirationDate,\n    uint256 _verificationTime,\n    string memory gameDetails\n) external onlyBetCreator\n"})}),"\n",(0,r.jsx)(n.p,{children:"Creates a new prediction market."}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Access"}),": Only Bet Creators"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Parameters"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"title"}),": Market title"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"description"}),": Detailed market description"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"expirationDate"}),": Unix timestamp when betting ends"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"_verificationTime"}),": Time in seconds for UMA verification (150s-86400s)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"gameDetails"}),": Additional market information"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Emits"}),": ",(0,r.jsx)(n.code,{children:"GameCreated"})]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"betting",children:"Betting"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-solidity",children:"function placeBet(uint256 gameId, bool isYes) external payable\n"})}),"\n",(0,r.jsx)(n.p,{children:"Places a bet on a specific market outcome."}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Access"}),": Any user"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Parameters"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"gameId"}),": Target market identifier"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"isYes"}),": True for Yes position, False for No"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Value"}),": ETH amount to bet (3% fee applied)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Requirements"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Market must exist and be active"}),"\n",(0,r.jsx)(n.li,{children:"Market must not be expired"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Emits"}),": ",(0,r.jsx)(n.code,{children:"BetPlaced"})]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"settlement",children:"Settlement"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-solidity",children:"function requestSettlement(\n    uint256 gameId,\n    uint256 reward,\n    uint256 bond\n) external onlyAdmin\n"})}),"\n",(0,r.jsx)(n.p,{children:"Initiates market settlement through UMA Oracle."}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Access"}),": Only Admins"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Parameters"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"gameId"}),": Market to settle"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"reward"}),": WETH amount for Oracle reward"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"bond"}),": WETH amount for security bond"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Requirements"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Market must be expired"}),"\n",(0,r.jsx)(n.li,{children:"Settlement not already requested"}),"\n",(0,r.jsx)(n.li,{children:"Sufficient WETH approved"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-solidity",children:"function settleGame(uint256 gameId) external onlyAdmin\n"})}),"\n",(0,r.jsx)(n.p,{children:"Finalizes market settlement after UMA verification."}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Access"}),": Only Admins"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Parameters"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"gameId"}),": Market to finalize"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Requirements"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Settlement must be requested"}),"\n",(0,r.jsx)(n.li,{children:"Verification period must be complete"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Emits"}),": ",(0,r.jsx)(n.code,{children:"GameResolved"})]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"claims",children:"Claims"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-solidity",children:"function claimWinnings(uint256 gameId) external\n"})}),"\n",(0,r.jsx)(n.p,{children:"Claims winnings from a resolved market."}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Access"}),": Any user"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Parameters"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"gameId"}),": Market to claim from"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Requirements"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Market must be resolved"}),"\n",(0,r.jsx)(n.li,{children:"User must have winning position"}),"\n",(0,r.jsx)(n.li,{children:"Not already claimed"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Emits"}),": ",(0,r.jsx)(n.code,{children:"WinningsClaimed"})]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"events",children:"Events"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-solidity",children:"event GameCreated(uint256 indexed gameId, string description);\n"})}),"\n",(0,r.jsx)(n.p,{children:"Emitted when a new prediction market is created."}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"gameId"}),": Unique market identifier"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"description"}),": Market description"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-solidity",children:"event BetPlaced(address indexed user, uint256 indexed gameId, bool isYes);\n"})}),"\n",(0,r.jsx)(n.p,{children:"Emitted when a bet is placed."}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"user"}),": Better's address"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"gameId"}),": Target market"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"isYes"}),": Chosen position"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-solidity",children:"event GameResolved(uint256 indexed gameId, bool outcome);\n"})}),"\n",(0,r.jsx)(n.p,{children:"Emitted when a market is resolved."}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"gameId"}),": Resolved market"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"outcome"}),": Final result (true=Yes, false=No)"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-solidity",children:"event WinningsClaimed(address indexed user, uint256 indexed gameId);\n"})}),"\n",(0,r.jsx)(n.p,{children:"Emitted when winnings are claimed."}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"user"}),": Claimer's address"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"gameId"}),": Source market"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"error-codes",children:"Error Codes"}),"\n",(0,r.jsx)(n.p,{children:"Common error messages and their meanings:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:'"Game already resolved"'}),": Settlement attempted on resolved market"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:'"Game not expired"'}),": Early settlement attempt"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:'"Settlement already requested"'}),": Duplicate settlement request"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:'"Verification time not passed"'}),": Early resolution attempt"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:'"Already claimed"'}),": Duplicate claim attempt"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}}}]);